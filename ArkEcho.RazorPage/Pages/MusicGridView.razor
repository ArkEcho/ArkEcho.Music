
@inherits MusicDisplayBase

@inject IAppModel model

@*<h3>MusicGridView  @Display.DisplayName, @Sorting.DisplayName</h3>*@

<MudGrid Justify="Justify.Center">

@foreach(Album album in model.Library.Album)
{
    <MudItem xs="6" sm="4" md="3" lg="2" xl="1">
        <MudCard>
            <MudCardHeader>
                <MudImage Class="rounded-lg" Src="@(getAlbumCover(album).Result)" Width="100" Height="100" Fluid="true" ObjectFit="ObjectFit.ScaleDown" />
            </MudCardHeader>
            <MudCardContent>
                <MudText Typo="Typo.overline">@album.Name</MudText>
                <MudText Typo="Typo.overline">@album.AlbumArtist</MudText>
            </MudCardContent>
            <MudCardActions>
                <MudIconButton Icon="@Icons.Material.Rounded.List" Color="Color.Default" />
            </MudCardActions>
        </MudCard>
    </MudItem>
}

</MudGrid>

@code {

    private async Task<string> getAlbumCover(Album album)
    {
        if (string.IsNullOrEmpty(album.Cover64))
            album.Cover64 = await model.GetAlbumCover(album.GUID);

        return $"data:image/png;base64,{album.Cover64}";
    }
}
