@inject IAppModel Model

@inherits PlayerControlBase

<MudStack>

    <MudPaper Class="mx-6 d-none d-md-flex" Height="10px" Elevation="0">
        <MudSlider Size="Size.Small" Min="0" Max="@DurationSeconds" 
        T="int" Immediate="true" @onmousedown="sliderMouseDown" @onmouseup="sliderMouseUp" ValueChanged="sliderVolumeChanged" Value="@Model.Player.Position" />
    </MudPaper>

    <MudPaper Class="d-flex" Style="bottom: 0; width: 100%; height: 50px" Elevation="0">

        <MudPaper Class="d-flex flex-none justify-start" Elevation="0" Width="230px">
            <MudPaper Class="pa-1 d-flex" MaxHeight="100%" MaxWidth="50px" Elevation="0">
                <MudImage Class="rounded-circle" Fluid="true" ObjectFit="ObjectFit.ScaleDown" Src="@Image64" />
            </MudPaper>

            <MudTooltip Arrow="true" Placement="Placement.Top" Delayed="0.5">
                <ChildContent>
                    <MudStack Class="ml-1 mt-1 pointer-events-none" Spacing="0">
                        <MudText Typo="Typo.body2">@getSongTitle(maxSongInfoLength)</MudText>
                        <MudText Typo="Typo.caption">@getSongPerformer(maxSongInfoLength)</MudText>
                    </MudStack>
                </ChildContent>

                <TooltipContent>
                    <MudStack Spacing="0">
                        <MudContainer MaxWidth="MaxWidth.Small">
                            <MudImage Class="rounded-lg" Width="100" Height="100" Fluid="true" ObjectFit="ObjectFit.ScaleDown" Src="@Image64" />
                        </MudContainer>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@getSongTitle(100)</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Song Titel</MudText>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@getSongPerformer(100)</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Song Performer</MudText>


                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@AlbumName</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Album Name</MudText>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@AlbumArtistName</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Album Interpret</MudText>
                    </MudStack>
                </TooltipContent>
            </MudTooltip>

        </MudPaper>

        <MudPaper Class="pt-2 pb-2 d-flex flex-grow-1 justify-center" Elevation="0">
        
            <MudPaper Class="pt-2 mr-2 d-none d-md-flex" Elevation="0">
                <MudText Typo="Typo.body2">@PositionTime / @DurationTime</MudText>
            </MudPaper>

            <MudPaper Class="d-flex border border-solid mud-border-primary" Elevation="0">
                <MudIconButton Class="mr-1 d-none d-md-flex" OnClick="shuffle" Icon="@ShuffleIcon" Color="Color.Primary" Size="Size.Medium" />
            
                <MudIconButton Class="mr-1 d-none d-md-flex" Icon="@Icons.Material.Rounded.Repeat" Color="Color.Primary" Size="Size.Medium" />

                <MudIconButton Class="mr-1 d-none d-md-flex" OnClick="stop" Icon="@Icons.Material.Rounded.Stop" Color="Color.Primary" Size="Size.Medium" />

                <MudIconButton Class="mr-1" OnClick="backward" Icon="@Icons.Material.Rounded.FastRewind" Color="Color.Primary" Size="Size.Medium" />

                <MudFab Class="mr-1 mt-n1" OnClick="playPause" Icon="@PlayPauseIcon" Color="Color.Primary" Size="Size.Small" />

                <MudIconButton Class="mr-md-1" OnClick="forward" Icon="@Icons.Material.Rounded.FastForward" Color="Color.Primary" Size="Size.Medium" />

                <MudIconButton Class="mr-1 d-none d-md-flex" OnClick="mute" Icon="@MuteIcon" Color="Color.Primary" Size="Size.Medium" />
                <MudPaper Class="mr-1 pt-1 d-none d-md-flex" Width="100px" Elevation="0">
                    <MudSlider Size="Size.Medium" Min="0" Max="100" Step="5" @bind-Value="Model.Player.Volume" ValueLabel="true" />
                </MudPaper>
            </MudPaper>

        </MudPaper>

        <MudPaper Class="d-flex flex-grow-1 justify-end" MaxWidth="200px" Elevation="0">
            <MudIconButton Class="mr-1 ml-n1" Icon="@Icons.Material.Rounded.QueueMusic" Color="Color.Primary" Size="Size.Medium" />
        </MudPaper>
    
    </MudPaper>
</MudStack>

@code
{
    private int maxSongInfoLength = 24;
}
