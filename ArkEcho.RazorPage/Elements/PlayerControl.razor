@inject Player player

@inherits PlayerControlBase

<MudStack>
    <MudElement Class="mx-4 d-none d-md-flex" Style="height: 10px;">
        <MudSlider Color="ControlColor" Size="Size.Small" Min="0" Max="@DurationSeconds"
                   T="int" Immediate="true" @onmousedown="sliderMouseDown" @onmouseup="sliderMouseUp" ValueChanged="sliderVolumeChanged" Value="@player.Position" />
    </MudElement>

    <MudElement Class="d-flex" Style="bottom: 0; width: 100%; height: 50px;">

        <MudElement Class="pb-1 d-flex flex-none justify-start" Style="width: 250px;">
            <MudElement Class="pa-1 d-flex" Style="max-height: 100%; max-width: 50px;">
                <MudImage Class="rounded-circle" Fluid="true" ObjectFit="ObjectFit.ScaleDown" Src="@Image64" />
            </MudElement>

            <MudTooltip Arrow="true" Placement="Placement.Top" Delay="0.5">
                <ChildContent>
                    <MudStack Class="ml-1 mt-1 pointer-events-none" Spacing="0">
                        <MudText Typo="Typo.body2">@getSongTitle(maxSongInfoLength)</MudText>
                        <MudText Typo="Typo.caption">@getSongPerformer(maxSongInfoLength)</MudText>
                    </MudStack>
                </ChildContent>

                <TooltipContent>
                    <MudStack Spacing="0">
                        <MudContainer MaxWidth="MaxWidth.Small">
                            <MudImage Class="rounded-lg" Width="100" Height="100" Fluid="true" ObjectFit="ObjectFit.ScaleDown" Src="@Image64" />
                        </MudContainer>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@getSongTitle(100)</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Song Titel</MudText>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@getSongPerformer(100)</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Song Performer</MudText>


                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@AlbumName</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Album Name</MudText>

                        <MudText Class="mt-3" Align="Align.Left" Typo="Typo.body2">@AlbumArtistName</MudText>
                        <MudDivider />
                        <MudText Class="mt-n2 grey-text" Align="Align.Left" Typo="Typo.overline">Album Interpret</MudText>
                    </MudStack>
                </TooltipContent>
            </MudTooltip>
        </MudElement>

        <MudElement Class="pb-4 d-flex flex-grow-1 justify-center">
        </MudElement>

        <MudElement Class="pt-2 mr-2 d-none d-md-flex justify-center" Style="width: 84px;">
            <MudText Typo="Typo.body2">@PositionTime / @DurationTime</MudText>
        </MudElement>

        <MudElement Class="pb-4 d-flex justify-center">

            <MudElement Class="d-flex border border-solid mud-border-info">
                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" OnClick="shuffle" Icon="@ShuffleIcon" Size="Size.Medium" />
            
                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" Icon="@Icons.Material.Rounded.Repeat" Size="Size.Medium" />

                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" OnClick="stop" Icon="@Icons.Material.Rounded.Stop" Size="Size.Medium" />

                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" OnClick="backward" Icon="@Icons.Material.Rounded.FastRewind" Size="Size.Medium" />
                <MudIconButton Class="mr-1 d-md-none d-flex" Color="ControlColor" OnClick="backward" Icon="@Icons.Material.Rounded.FastRewind" Size="Size.Small" />

                <MudFab Class="mr-1 mt-n1 d-none d-md-flex" Color="ControlColor" OnClick="playPause" Icon="@PlayPauseIcon" Size="Size.Small" />
                <MudIconButton Class="mr-1 d-md-none d-flex" Color="ControlColor" OnClick="playPause" Icon="@PlayPauseIcon" Size="Size.Small" />

                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" OnClick="forward" Icon="@Icons.Material.Rounded.FastForward" Size="Size.Medium" />
                <MudIconButton Class="d-md-none d-flex" Color="ControlColor" OnClick="forward" Icon="@Icons.Material.Rounded.FastForward" Size="Size.Small" />

                <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" OnClick="mute" Icon="@MuteIcon" Size="Size.Medium" />
                <MudElement Class="mr-4 pt-2 d-none d-md-flex" Style="width: 100px;">
                    <MudSlider Color="ControlColor" Size="Size.Medium" Min="0" Max="100" Step="5" @bind-Value="player.Volume" ValueLabel="true" />
                </MudElement>
            </MudElement>
        </MudElement>

        <MudElement Class="pb-4 mr-2 d-none d-md-flex flex-none justify-center" Style="width: 84px;">
        </MudElement>

        <MudElement Class="pb-4 d-flex flex-grow-1 justify-center">
        </MudElement>

        <MudElement Class="pb-4 d-flex flex-grow-1 justify-end" Style="max-width: 250px;">
            <MudIconButton Class="mr-1 d-none d-md-flex" Color="ControlColor" Icon="@Icons.Material.Rounded.QueueMusic" Size="Size.Medium" />
            <MudIconButton Class="mr-1 d-md-none d-flex" Color="ControlColor" Icon="@Icons.Material.Rounded.QueueMusic" Size="Size.Small" />
        </MudElement>
    
    </MudElement>
</MudStack>


@code
{
    [Parameter]
    public MudBlazor.Color ControlColor { get; set; }

    private int maxSongInfoLength = 27;
}
